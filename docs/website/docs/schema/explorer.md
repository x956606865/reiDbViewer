---
id: schema-explorer-guide
sidebar_label: Schema Explorer
title: Schema Explorer
---

Schema Explorer 用于浏览数据库的 Schema、表结构、索引与关系信息，默认优先读取缓存，必要时可以刷新真实元数据。

![Schema Explorer 页面占位符](/img/placeholders/schema-explorer.svg)

## 前提条件
- 当前用户已选择有效连接，并具备读取 `pg_catalog` 的权限。
- APP_DB 中已经缓存对应 Schema 信息，或允许触发刷新。

## 主面板介绍
- **Schema 列表**：左侧栏列出可访问的 Schema，可通过收藏标记常用项。
- **表格信息**：内容区展示字段名、类型、是否可为空、默认值、注释等。
- **索引摘要**：整合 `pg_index` 与 `pg_indexes`，展示唯一性、表达式列与包含列。
- **关系图预览**：若表存在外键，会生成简要的关系图用于快速理解依赖。

## 切换与过滤 Schema
### 操作步骤
1. 在左侧 Schema 面板使用搜索框过滤关键字。
2. 勾选“仅显示收藏”以隐藏不常用 Schema。
3. 点击 Schema 名称展开表列表，右键可将表添加到快速访问。

### 结果确认
- 表列表应缩小至匹配范围；收藏项会以星标显示。

## 查看表详情
1. 选择目标表后，右侧会展示“字段”“索引”“预览 SQL”三个选项卡。
2. 在“字段”选项卡中，可复制列名与类型；点击 JSON/JSONB 字段会打开格式化弹窗。
3. “索引”选项卡提供索引定义、列顺序、是否可用于排序的提示。

## 刷新元数据
### 操作步骤
1. 点击右上角的 **刷新 Schema**。
2. 确认弹窗中的只读提醒（刷新操作会读取系统表但不会写入业务库）。
3. 观察顶部进度条，等待后端将最新信息写入 APP_DB 缓存。

### 故障排查
| 情况 | 说明 | 处理办法 |
| --- | --- | --- |
| 刷新超时 | 目标库响应较慢或权限不足 | 调整 `SCHEMA_REFRESH_TIMEOUT_MS`，或检查只读账号权限 |
| 切换 Schema 为空 | APP_DB 缓存缺失 | 确认是否完成初始化；必要时手动清理缓存表后重试 |

> 小贴士：刷新操作会记录在审计日志中，并提示缓存更新时间，方便团队追踪变更。
